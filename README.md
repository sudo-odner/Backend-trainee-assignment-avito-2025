# PR Reviewer Assignment Service
Тестовое задание для стажёров на Goland Backend (Осенняя волна 2025)

Этот проект реализует сервис назначения ревьюеров на Pull Request'ы внутри команды.  
Сервис предоставляет HTTP API, полностью совместимый с выданной OpenAPI-спецификацией (`task/openapi.yaml`).  
Сервис поднимается через `docker-compose up` и работает на порту **8080**.
В докер контейнере, чтобы проверить линтером код `golangci-lint run`

---

# Архитектура

Проект построен на модульной структуре:
- `cmd` - точка запуска приложения (подгрузка логгера, конфига)
- `config` - конфиг файлы
- `internal` - внутренние модули
  - `app` - создание всех объектов
  - `domain` - контракты общения между модулями (storage и transport)
  - `storage` - хранилище
    - `postgresql` - модель DB в `PostgreSQL`
    - `Err` - Ошибки, который могут прийти с storage 
    - `Migrantion` - Код миграции BD
  - `transport` - точка вхождения в приложения (через HTTP)
    - `router` - внешние ручки `chi`
    - `ErrResponse` - Статусы ошибок
- `pkg` - внешние зависимости, которые можно переиспользовать в другом проекте
- `migrations` - sql файлы с миграцией
- `task` - файлы поставленной задачи
- `.gitignore` - гит игнор
- `.golangci.yml` - правила для линтера
- `Dockerfile` | `docker-compose.yml` - Докер файлы
---

# Структура БД
Используется PostgreSQL.  
Миграции создаются автоматически при старте.
Таблицы:
- `users` - таблица пользователей, уникальный id, имя(name), статус(isActive)
- `teams` - таблица команд с уникальными именами команд
- `teams_users` - таблица связей команда(teams) - пользователь(users)
- `pull_requests` - таблица PR, с уникальным id (id), именем(name), id автора (aouthor_id), стутус (status(`OPEN|MERGE`)), время мерджа (merged_at)
- `pr_reviewers` - таблица связей PR(pull_requests) - reviewer(users)

---


## Вопросы и проблемы, возникшие при реализации
### 1. Пользователь может состоять в нескольких командах

По условиям тестового задания структура подразумевает, что пользователь может состоят не в одной команде. 
При этом PR не может быть назначен на конкретную команду (смотрим команду по пользователю). 
В связи с чем возникает конфликт, когда пользователь из нескольких командах - проверяющими могут быть люди из разных команд.

Возможные решения:
- Добавить к PR атрибут отвечающий за конкретную команду
- Ограничить пользователя на участие в одной команде
- PR могут проверять все коллеги, даже из разных команд

Я выбрал **'Ограничить пользователя на участие в одной команде'**, так как она является наиболее безопасной 
(**'PR могут проверять все коллеги, даже из разных команд'** - не лучшее решение так как коллегии из разных команд, могут не разбираться в контексте задачи) и не меняет логики поставленной задачи
(**'Добавить к PR атрибут отвечающий за конкретную команду** - противоречит условию объектов из задания)
